# 空文件清理器插件

## 功能描述

本插件用于自动删除指定目录下的空文件（包括子目录），支持排除指定目录。主要特性包括：

1. **删除指定目录下的空文件（包括子目录）**
2. **能够排除指定目录本身（自己不被删除，但是子文件需要检查是否为空文件）**
3. 支持设置最小文件大小阈值（小于等于该大小的文件视为空文件）
4. 支持删除空目录
5. 支持定时执行和手动执行
6. 支持测试模式（预览将要删除的文件而不实际删除）
7. 支持消息通知

## 配置说明

### 基本设置
- **启用插件**: 是否启用插件
- **立即运行一次**: 启用后立即执行一次清理任务
- **发送通知**: 是否在任务完成后发送通知消息

### 执行设置
- **执行周期**: 使用Cron表达式设置定时执行周期，默认为每天凌晨2点执行（0 2 * * *）
- **最小文件大小**: 小于等于该大小（字节）的文件将被视为空文件，默认为0字节

### 目录设置
- **目标目录**: 需要清理的目录列表，每行一个目录路径
- **排除目录**: 需要排除的目录列表，这些目录本身不会被删除，但会检查其中的空文件

### 高级设置
- **删除空目录**: 是否同时删除空目录
- **测试模式**: 开启后只会记录将要删除的文件，不会实际删除

## 使用示例

### 配置示例1：清理下载目录
```
目标目录:
/downloads
/media/incomplete

排除目录:
/downloads/working
/downloads/temp

最小文件大小: 0
```

### 配置示例2：清理媒体库
```
目标目录:
/media/movies
/media/tv

排除目录:
/media/movies/.metadata
/media/tv/.metadata

最小文件大小: 1024
删除空目录: 是
```

## 注意事项

1. **安全提醒**: 空文件清理存在数据丢失风险，建议：
   - 首次使用时开启"测试模式"预览要删除的文件
   - 确认无误后再关闭测试模式执行实际删除
   - 定期备份重要数据

2. **排除目录说明**:
   - 排除目录本身不会被删除
   - 但排除目录内的空文件仍会被检查和删除
   - 支持多级目录排除

3. **空目录处理**:
   - 删除空目录功能会从最深层目录开始清理
   - 排除目录不会被删除，即使为空

4. **远程控制**:
   - 支持通过远程命令 `/clean_empty_files` 手动触发清理
   - 支持通过API接口调用

## 版本历史

### v1.0.0
- 初始版本
- 支持删除指定目录下的空文件
- 支持排除指定目录
- 支持定时任务和手动执行
- 支持测试模式
- 支持消息通知
